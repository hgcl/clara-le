---
pagination:
    data: "recipeData"
    size: 1
    alias: "recipe"
permalink: "recipes/{{ recipe.key }}/"
eleventyComputed:
    title: "{{ recipe.title }}"
    dateCreated: "{{ recipe.dateCreated }}"
    duration: "{{ recipe.duration }}"
    tags: "{{ recipe.dataTag }}"
---

{# TODO fix tags in eleventyComputed so that it passes an array #}

{# This is the recipe post template.
   The original data (JSON files) are from the recipes directory.
   The mapped data is generated in_data/recipeData.js #} 

{% extends "layout/base.njk" %}

{% block customstyles %}
<style>
  #ingredients {
    font-size: smaller;
    color: var(--color-text);
  }
  #ingredients li span::before {
    content: "\A\2003";
  }
  #recipe-instructions {
    max-width: var(--screen-md);
  }
  @media only screen and (min-width: 768px) {
    #recipe-content {
      display: flex;
      flex-direction: row;
      gap: var(--space-2xl);
    }
    #ingredients {
      flex: 1 0 250px;
      align-self: flex-start;
      position: sticky;
      top: 0;
    }
  }
</style>
{% endblock %}

{% block article %}
{% include 'post-header.njk' %}
<article class="h-recipe">
  {% if recipe.intro %}<p class="intro center">{{ recipe.intro }}</p>{% endif %}
  <div id="recipe-content" class="e-content">
    <section id="ingredients">
      <h2>Ingredients</h2>
      {% for group in recipe.ingredients %}
      {% if group.ingTitle %}<h3>{{ group.ingTitle }}</h3>{% endif %}
      <ul>
        {% for ingredient in group.ingMand %}
        <li class="p-ingredient">{{ ingredient }}</li>
        {% endfor %}
        {% for ingredient in group.ingOpt %}
        <li class="p-ingredient">{{ ingredient }} <span class="label">optional</span></li>
        {% endfor %}
      </ul>
      {% endfor %}
    </section>
    <section id="recipe-instructions" class="e-instructions">
      <h2>Instructions</h2>
      {% for group in recipe.instructions %}
      {% if group.insTitle %}<h3>{{ group.insTitle }}</h3>{% endif %}
      <ol>
        {% for instruction in group.insSteps %}
        <li>{{ instruction }}</li>
        {% endfor %}
      </ol>
      {% endfor %}
      <p class="subtle">
        <em>Adapted from this <a href="{{ recipe.sourceUrl }}">original recipe</a></em>
      </p>
    </section>
  </div>
</article>
{% endblock %}