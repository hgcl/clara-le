<!--
template: /templates/default.html
buildScript: /scripts/buildRecipesList.js
-->

<h1>Recipe book</h1>
<p class="intro">
  Here is a collection of recipes I have bookmarked. The original recipes are
  linked in the posts directly. Some of the steps and ingredients might differ
  from the original instructions to suit my preferences.
</p>
<label for="filter-recipes">Filter:</label>
<select name="tags" id="filter-recipes" onchange="filter(value);">
  <option value="">All</option>
  <optgroup label="By type">
    <option value="dessert">Desserts</option>
    <option value="main">Mains</option>
    <option value="cereal">Cereals</option>
    <option value="extra">Extras</option>
    <option value="diy">DIY</option>
  </optgroup>
  <optgroup label="By season">
    <option value="spring">Spring (Apr–Jun)</option>
    <option value="summer">Summer (Jul–Sep)</option>
    <option value="fall">Fall (Oct–Dec)</option>
    <option value="winter">Winter (Jan–Mar)</option>
  </optgroup>
</select>
<ul id="recipe-list" class="nobullet">
  <li>Posts go here</li>
</ul>

<script>
  // TODO: find ways to add multiple filter categories
  function filter(param) {
    // Select all <li> and unhide
    const completeLiList = [...document.querySelectorAll(`li[data-tag]`)];
    completeLiList.map(li => li.setAttribute("style", "display:flex"));
    let i = 0;
    while (param.length > 0 && i < completeLiList.length) {
      // Select <li> number i and get its tags
      let tagArray = completeLiList[i].getAttribute("data-tag").split(' ');
      // Hide <li> if it doesn't include the selected param
      if (tagArray.includes(param) === false) { completeLiList[i].setAttribute("style", "display:none") }
      i++;
    }
  }
</script>