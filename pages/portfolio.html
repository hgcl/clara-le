<!--
template: /templates/blank.html
buildScript: "/scripts/formatPostDetails.js"
dateCreated: 2023-03-07
-->

<!-- Resource: 
  https://daveyhert.hashnode.dev/revealing-contents-on-scroll-using-javascripts-intersection-observer-api 
  https://www.youtube.com/watch?v=M8Gq_HPDXsU
-->

<style>
  svg {
    width: 100%;
    height: 100vh;
    position: fixed;
    top: 0;
  }
  svg path {
    height: 100%;
  }
  section {
    height: 100vh;
    width: 100%;
    gap: var(--space-s);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  img {
    object-fit: cover;
    min-width: 200px;
  }
  .h1 {
    text-align: center;
  }
  .explanation {
    max-width: 600px;
  }
  .anim {
    opacity: 0;
    z-index: 2;
  }
  .animate {
    animation: reveal 1s forwards;
    transition: all 2s ease-in;
  }
  @keyframes reveal {
    from {
      opacity: 0;
      transform: translateX(-180px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
</style>
<div>
  <section>
    <p class="anim h1">Hey, I'm Clara.</p>
  </section>
  <section><p class="anim h1">A designer</p></section>
  <section>
    <p class="h2">The Berlin Walls: Street Art Walks In Berlin</p>
  </section>
  <section class="anim">
    <img src="/images/portfolio/berlinwalls.jpg" /><img
      src="/images/portfolio/berlinwalls2.jpg"
    />
  </section>
  <section>
    <p class="explanation">
      When arriving in Berlin in 2018, Robin and I were amazed by how street art
      covered everythingâ€”walls, bridges and cars. From the big murals to the
      small stickers, we explored our first neighborhood through the urban art
      lens. A 50-page street art walking guide was born of it.
    </p>
  </section>
  <section class="anim">
    <img src="/images/portfolio/berlinwalls.jpg" /><img
      src="/images/portfolio/berlinwalls.jpg"
    />
  </section>
  <svg
    preserveAspectRatio="none"
    height="560"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path id="path" d="M1 0v560" />
    <text>
      <textPath id="text" class="h1" fill="white" href="#path">
        Exampleeeeee
      </textPath>
    </text>
  </svg>
</div>
<script>
  // 1. Animate background elements
  let textPath = document.querySelector("#text");

  function updateTextPathOffset(offset) {
    textPath.setAttribute("startOffset", offset);
  }

  function onScroll() {
    requestAnimationFrame(function () {
      updateTextPathOffset(window.scrollY);
    });
  }

  window.addEventListener("scroll", onScroll);

  // 2. Animate titles
  const titles = document.querySelectorAll(".anim");

  const options = {
    root: null,
    rootMargin: "10px", // start 10px before threshold
  };

  function callbackFunction(entries) {
    entries.forEach((entry) => {
      if (entry.isIntersecting == true) {
        entry.target.classList.add("animate");
      } else {
        entry.target.classList.remove("animate");
      }
    });
  }

  observer = new IntersectionObserver(callbackFunction, options);

  titles.forEach((title) => {
    observer.observe(title);
  });
</script>
